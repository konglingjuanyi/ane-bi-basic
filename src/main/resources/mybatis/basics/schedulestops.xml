<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ane56.bi.domain.basics.SchedulesstopsRepository">

	<select id="findStopsByScheduleId" resultType="com.ane56.bi.domain.basics.StopsVO">
		SELECT s.* FROM stops s,schedulesstops ss 
		WHERE s.id = ss.stopId AND ss.scheduleId = #{scheduleId}
		ORDER BY s.stopSort ;
	</select>
	
	<insert id="insertStops">
		INSERT INTO stops (id, stopId, stopName, stopSort, arteryTime, arriveTime, intervalTime, leaveTime)
		VALUES( #{id}, #{stopId}, #{stopName}, #{stopSort}, #{arteryTime}, #{arriveTime}, #{intervalTime}, #{leaveTime})
	</insert>
	
	<delete id="deleteStops">
		DELETE FROM stops WHERE id = #{id}
	</delete>
	
	<insert id="insertRelation">
		INSERT INTO schedulesstops (id, scheduleId, stopId)
		VALUES( #{id}, #{scheduleId}, #{stopId})
	</insert>
	
	<delete id="deleteRelation">
		DELETE FROM schedulesstops WHERE scheduleId = #{scheduleId} AND stopId = #{stopId}
	</delete>
	
</mapper>